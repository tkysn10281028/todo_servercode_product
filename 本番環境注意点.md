# 本番環境デプロイに当たって

## バージョン
java　version : 11系（環境内のjavaのバージョンに合わせる）  
springboot　最新版で問題なし  
gradleを使用（プロジェクトに合わせる。今回は全てgradleで作成）  

### ※17→11に変更する際には仕様が微妙に違うので注意※  
・17系はcircular referrenceを許容するが、11系はダメ。　いずれにせよインスタンスの循環参照は辞めよう。
・クラス内に内部クラスを定義してその内部クラスを@autowiredする→11系では無理
他にも多数有。プロジェクト作成時に合わせておくことを進める。


## 非同期通信
vuejs内で非同期通信を使用しているため、非同期通信先を本番環境に合わせておく必要がある。


## html内のcssやjsファイル等静的ファイルの読み出し時の仕様修正
vuecliでビルドしたdistフォルダ内のファイルをそのまま配置した場合ローカルでは動作しても本番環境では動作しない点に注意。

根本的原因としては本番環境内では静的ファイル内のhrefをリンクとみなしてしまうため。

例：<link href=ファイル名 >のhref。
上記をリンクとみなしてしまう＝get要求をサーバー側に飛ばす＝リクエストがmappingされていないよ＝エラー
となるため。

解決策としては全てのhrefの先頭に./を付加する。

今回のコードで実施した対策
①htmlファイル内。
link hrefとscript srcの中身の先頭に./を付ける
（これを付けないとgetのリクエストとみなされる）

②distフォルダ内のjs.mapファイル内のjsファイルを読み出している箇所に./を付ける

③
①②だけだとcssファイルを1つだけ読み取ってくれない（about--.cssってやつ)
これを読み出すためにjsファイルとjs.mapファイル内のすべてのファイルで該当ファイルを探し出してそこの記述の読み出しを./にする必要がある。

④
③だけだとリソースとして読み取ってくれない。
読み取ってくれないcssファイルをさらに読み出しするため既に記述されているlink hrefの記述に加えて
<link href="ファイル名" rel="stylesheet">をhtmlファイルのheadタグ内に追加






